@use '../../../styles/variables' as *;

/* Dark Mode Glass Header - Enhanced Readability */
.navbar { 
  position: absolute; 
  top: 0; 
  left: 0; 
  right: 0; 
  width: 100%; 
  background: linear-gradient(180deg, rgba(15, 15, 35, 0.8) 0%, rgba(15, 15, 35, 0.4) 100%);
  backdrop-filter: blur(12px) saturate(180%);
  border: none; 
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  z-index: $z-sticky; 
  transition: all .4s cubic-bezier(.16,.8,.28,.99);
  
  &.scrolled { 
    position: fixed;
    background: rgba(15, 15, 35, 0.95); 
    backdrop-filter: blur(24px) saturate(180%); 
    border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.1) inset;
  }
}

.nav-container { 
  max-width: $container-max-width; 
  margin: 0 auto; 
  padding: 0 clamp(1rem, 4vw, 2rem); 
  display: flex; 
  align-items: center; 
  justify-content: space-between;
  height: 80px; 
}

.nav-brand { 
  display: inline-flex; 
  align-items: center; 
  gap: $spacing-md; 
  font-weight: $font-weight-bold; 
  font-size: clamp(1.2rem, 2.2vw, 1.5rem); 
  text-decoration: none; 
  color: $white;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
  z-index: 10;
  transition: all .3s ease;
  
  &:hover {
    color: $primary-light;
    transform: translateY(-1px);
  }
}

.nav-brand .logo-container {
  height: 48px; 
  width: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1));
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 14px;
  backdrop-filter: blur(12px) saturate(180%);
  box-shadow: 0 4px 16px rgba(99, 102, 241, 0.2),
              inset 0 1px 0 rgba(255, 255, 255, 0.2);
  transition: all .3s ease;
}

.nav-brand:hover .logo-container {
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.25), rgba(139, 92, 246, 0.15));
  border-color: rgba(255, 255, 255, 0.3);
  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.3),
              inset 0 1px 0 rgba(255, 255, 255, 0.3);
  transform: scale(1.05);
}

.nav-brand .logo { 
  height: 28px; 
  width: 28px;
  color: $white;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.brand-text {
  font-weight: $font-weight-bold;
  letter-spacing: .5px;
  background: linear-gradient(135deg, $white, rgba(255, 255, 255, 0.9));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: none;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.nav-menu { 
  list-style: none; 
  display: flex; 
  align-items: center; 
  gap: clamp(0.75rem, 2vw, 1.5rem); 
  margin: 0; 
  padding: 0;
  flex: 1;
  justify-content: center;
}

.nav-link { 
  background: rgba(255, 255, 255, 0.08); 
  border: 1px solid rgba(255, 255, 255, 0.12);
  font: inherit; 
  color: rgba(255, 255, 255, 0.9); 
  text-decoration: none; 
  padding: $spacing-sm $spacing-md; 
  font-weight: $font-weight-medium; 
  font-size: .9rem;
  cursor: pointer; 
  display: inline-flex; 
  align-items: center; 
  gap: .4rem; 
  position: relative; 
  border-radius: $border-radius-lg;
  backdrop-filter: blur(8px) saturate(180%);
  transition: all .3s cubic-bezier(.16,.8,.28,.99);
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  
  &:hover, &.active { 
    color: $white;
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2), 0 4px 8px rgba(99, 102, 241, 0.2);
  }
}

.nav-link::after { 
  content: ''; 
  position: absolute; 
  left: 50%; 
  bottom: -2px; 
  height: 2px; 
  width: 0; 
  background: linear-gradient(90deg, $primary-color, $accent-color); 
  transition: all .3s ease; 
  transform: translateX(-50%);
  border-radius: 1px;
  box-shadow: 0 0 8px rgba(99, 102, 241, 0.6);
}

.nav-link:hover::after, .nav-link.active::after { 
  width: 80%; 
}

.chevron { 
  display: inline-block; 
  width: 8px; 
  height: 8px; 
  border-right: 2px solid currentColor; 
  border-bottom: 2px solid currentColor; 
  transform: rotate(45deg); 
  margin-top: -2px; 
  transition: $transition-all; 
}

.dropdown { 
  position: relative;
}

.dropdown-menu { 
  position: absolute; 
  top: calc(100% + 2px); 
  left: 50%; 
  transform: translateX(-50%) translateY(10px); 
  display: grid; 
  background: rgba(15, 15, 35, 0.95); 
  backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.15); 
  padding: $spacing-md; 
  list-style: none; 
  min-width: 280px; 
  gap: 4px; 
  opacity: 0; 
  pointer-events: none; 
  transition: all .3s cubic-bezier(.16,.8,.28,.99); 
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 8px 16px rgba(0, 0, 0, 0.2); 
  border-radius: $border-radius-xl;
  z-index: 100;
}

.dropdown-menu.two-col { 
  grid-template-columns: repeat(2, minmax(0, 1fr)); 
  min-width: 420px; 
}

// Create a hover bridge to prevent dropdown from closing
.dropdown::before {
  content: '';
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  height: 10px;
  background: transparent;
  z-index: 99;
}

.dropdown:hover > .nav-link .chevron { 
  transform: rotate(225deg); 
}

.dropdown:hover > .dropdown-menu,
.dropdown-menu:hover { 
  opacity: 1; 
  transform: translateX(-50%) translateY(0); 
  pointer-events: auto; 
}

.dropdown-link { 
  display: block; 
  padding: $spacing-sm $spacing-md; 
  border-radius: $border-radius-base; 
  font-size: .85rem; 
  text-decoration: none; 
  color: $text-secondary; 
  line-height: 1.3; 
  font-weight: 500;
  transition: all .2s ease;
  border: 1px solid transparent;
  
  &:hover { 
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1)); 
    border-color: rgba(99, 102, 241, 0.2);
    color: $primary-light; 
    transform: translateX(4px);
  }
}

/* Enhanced CTA Button Positioning */
.nav-cta { 
  margin-left: auto;
  
  .btn { 
    font-size: .85rem; 
    padding: $spacing-sm $spacing-lg; 
    background: linear-gradient(135deg, $primary-color, $accent-color);
    color: $white;
    border: 1px solid rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(12px) saturate(180%);
    box-shadow: 0 8px 16px rgba(99, 102, 241, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
    font-weight: 600;
    letter-spacing: .3px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    border-radius: $border-radius-xl;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    white-space: nowrap;
    transition: all .3s cubic-bezier(.16, .8, .28, .99);
    
    &:hover {
      background: linear-gradient(135deg, lighten($primary-color, 10%), lighten($accent-color, 10%));
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(99, 102, 241, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
      color: $white;
    }
  }
}

// Mobile menu with glass effect
.mobile-menu-btn { 
  display:none; 
  background:rgba(255,255,255,.15); 
  border:1px solid rgba(255,255,255,.2); 
  cursor:pointer; 
  padding:0; 
  width:44px; 
  height:44px; 
  border-radius:$border-radius-lg; 
  align-items:center; 
  justify-content:center; 
  position:relative; 
  backdrop-filter:blur(8px);
  transition:all .3s ease;
  
  &:hover {
    background:rgba(255,255,255,.25);
    transform:translateY(-1px);
  }
}

.mobile-menu-btn .hamburger-line { 
  position:absolute; 
  left:12px; 
  right:12px; 
  height:2px; 
  background:$white; 
  border-radius:2px; 
  transition:$transition-all; 
  box-shadow:0 1px 2px rgba(0,0,0,.2);
}

.mobile-menu-btn .hamburger-line:nth-child(1){ top:16px; }
.mobile-menu-btn .hamburger-line:nth-child(2){ top:22px; }
.mobile-menu-btn .hamburger-line:nth-child(3){ top:28px; }

.mobile-menu.active + .mobile-menu-btn .hamburger-line:nth-child(1){ 
  transform:translateY(6px) rotate(45deg); 
}
.mobile-menu.active + .mobile-menu-btn .hamburger-line:nth-child(2){ 
  opacity:0; 
}
.mobile-menu.active + .mobile-menu-btn .hamburger-line:nth-child(3){ 
  transform:translateY(-6px) rotate(-45deg); 
}

.mobile-menu { 
  display:none; 
  position:fixed; 
  top:80px; 
  left:0; 
  right:0; 
  background:rgba(255,255,255,.95); 
  backdrop-filter:blur(20px) saturate(180%);
  border-bottom:1px solid rgba(255,255,255,.2); 
  box-shadow:0 8px 32px rgba(0,0,0,.15); 
  padding:$spacing-xl $spacing-lg; 
  z-index:999;
}

.mobile-menu.active { 
  display:block; 
  animation:slideDown .4s cubic-bezier(.16,.8,.28,.99); 
}

.mobile-inner { 
  display:flex; 
  flex-direction:column; 
  gap:$spacing-sm; 
}

.mobile-inner a { 
  text-decoration:none; 
  color:$text-secondary; 
  padding:$spacing-md; 
  border-radius:$border-radius-lg; 
  font-weight:$font-weight-medium; 
  transition:all .2s ease;
  
  &:hover { 
    background:linear-gradient(135deg,rgba($primary-color,.1),rgba($accent-color,.05)); 
    color:$primary-color; 
    transform:translateX(6px);
  }
}

@keyframes slideDown {
  from { opacity:0; transform:translateY(-20px); }
  to { opacity:1; transform:translateY(0); }
}

@media (max-width: $breakpoint-tablet) {
  .nav-container {
    padding: 0 $spacing-lg;
  }
  
  .nav-menu, .nav-cta { 
    display: none; 
  }
  
  .mobile-menu-btn { 
    display: flex; 
  }
}

@media (max-width: 1024px) {
  .nav-menu {
    gap: 0.75rem;
  }
  
  .nav-link {
    padding: $spacing-xs $spacing-sm;
    font-size: 0.85rem;
  }
  
  .nav-cta .btn {
    padding: $spacing-xs $spacing-md;
    font-size: 0.8rem;
  }
  
  .brand-text {
    font-size: 1.1rem;
  }
}

// Mobile menu
.mobile-menu-btn { display:none; background:none; border:none; cursor:pointer; padding:0; width:42px; height:42px; border-radius:$border-radius-base; align-items:center; justify-content:center; position:relative; }
.mobile-menu-btn .hamburger-line { position:absolute; left:10px; right:10px; height:3px; background:$text-primary; border-radius:3px; transition:$transition-all; }
.mobile-menu-btn .hamburger-line:nth-child(1){ top:14px; }
.mobile-menu-btn .hamburger-line:nth-child(2){ top:20px; }
.mobile-menu-btn .hamburger-line:nth-child(3){ top:26px; }
.mobile-menu.active + .mobile-menu-btn .hamburger-line:nth-child(1){ transform:translateY(6px) rotate(45deg); }

.mobile-menu { display:none; position:fixed; top:72px; left:0; right:0; background:$white; border-bottom:1px solid $gray-200; box-shadow:$shadow-lg; padding:$spacing-lg $spacing-md; }
.mobile-menu.active { display:block; animation:fadeIn .4s ease; }
.mobile-inner { display:flex; flex-direction:column; gap:$spacing-sm; }
.mobile-inner a { text-decoration:none; color:$text-secondary; padding:$spacing-sm $spacing-sm; border-radius:$border-radius-sm; font-weight:$font-weight-medium; }
.mobile-inner a:hover { background:$gray-100; color:$primary-color; }

// Mobile responsive styles handled above

